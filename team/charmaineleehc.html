<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.6.1">
<title>Charmaine Lee - Project Portfolio</title>
<link rel="stylesheet" href="../stylesheets/gh-pages.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
<link rel="stylesheet" href="../stylesheets/coderay-asciidoctor.css">
</head>
<body class="article">
<div id="header">
<h1>Charmaine Lee - Project Portfolio</h1>
</div>
<div id="content">
<div class="sect1">
<h2 id="project-carvicim"><a class="link" href="#project-carvicim">PROJECT: CarviciM</a></h2>
<div class="sectionbody">
<hr>
</div>
</div>
<div class="sect1">
<h2 id="overview"><a class="link" href="#overview">Overview</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>CarviciM is a desktop car servicing management application, morphed from <a href="https://github.com/nus-cs2103-AY1718S2/addressbook-level4">AddressBook - Level 4</a>, which is used for teaching Software Engineering principles in NUS School of Computing. The user interacts with it using a CLI, and it has a GUI created with JavaFX. It is written in Java, and has about 10 kLoC initially, before the morph.</p>
</div>
<div class="paragraph">
<p>CarviciM is for car servicing managers to manage the sheer amount car servicing jobs with convenience and ease. CarviciM allows car servicing managers to Carvicim to add jobs, close ongoing jobs, import large number of job entries, manage employees for job assignment, notify employees of jobs through email, and more.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="summary-of-contributions"><a class="link" href="#summary-of-contributions">Summary of contributions</a></h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><strong>Major enhancement</strong>: added <strong>the ability to send out auto-generated emails containing job details</strong></p>
<div class="ulist">
<ul>
<li>
<p>What it does: Allows the user to send out auto-generated emails about the job details to all the assigned employees of the job.</p>
</li>
<li>
<p>Justification: Before this feature is implemented, a car servicing manager would typically call up employees one by one to inform them of their job details for the next day, which takes up a lot of time. With this feature, the user can so conveniently inform their employees about the job that will be doing. Moreover, the emails are auto-generated, so the user need not type out the job details themselves. This greatly speeds up administrative work done by car servicing managers.</p>
</li>
<li>
<p>Highlights: This enhancement required an in-depth analysis of design alternatives in order to pick the better choice. The implementation too was challenging as it required being able to connect to Gmail in order to send out emails to all employees assigned to the job with the specific job details as the content. Moreover, strictly adherence to coding standards was required. Adding test cases was also necessary as the code had to contain as few bugs as possible.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Minor enhancement</strong>: added <strong>the ability to filter list of employees by their tags</strong></p>
<div class="ulist">
<ul>
<li>
<p>What it does: allows the user to enter multiple keywords and the employee list will be filtered to show only employees that have tags matching those keywords.</p>
</li>
<li>
<p>Justification: The employees can be tagged by their roles in the company (e.g. mechanic, techician, etc.). With the ability to filter the employee list by their tags, the car servicing manager can easily find the right employee for a specifc kind of job.</p>
</li>
<li>
<p>Highlights: This implementation was challenging as it required a working algorithm that can match multiple keywords to multiple tags.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Code contributed</strong>: [<a href="https://github.com/CS2103JAN2018-W09-B1/main/blob/master/collated/functional/charmaineleehc.md">Functional code</a>] [<a href="https://github.com/CS2103JAN2018-W09-B1/main/blob/master/collated/test/charmaineleehc.md">Test Code</a>]</p>
</li>
<li>
<p><strong>Other contributions</strong>:</p>
<div class="ulist">
<ul>
<li>
<p>Project management:</p>
<div class="ulist">
<ul>
<li>
<p>Managed release <code>v1.5rc</code> on GitHub</p>
</li>
<li>
<p>Used GitHub issues tracker to keep track of issues that arise throughout the development process</p>
</li>
</ul>
</div>
</li>
<li>
<p>Documentation:</p>
<div class="ulist">
<ul>
<li>
<p>Updated User Guide with the features implemented (see below, under Contributions to the User Guide).</p>
</li>
<li>
<p>Updated Developer Guide with the features implemented (see below, under Contributions to the Developer Guide).</p>
</li>
<li>
<p>Made changes to other parts of both User and Developer Guide to make them more reader-friendly, such as formatting and improving the language used.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Community:</p>
<div class="ulist">
<ul>
<li>
<p>Reported bugs and suggestions for other teams in the class (<a href="https://github.com/CS2103JAN2018-W13-B4/main/issues/213">example</a>)</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="contributions-to-the-user-guide"><a class="link" href="#contributions-to-the-user-guide">Contributions to the User Guide</a></h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Given below are sections I contributed to the User Guide. They showcase my ability to write documentation targeting end-users.</em></p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="login-to-gmail-code-login-code"><a class="link" href="#login-to-gmail-code-login-code">Login to Gmail : <code>login</code></a></h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Before using this command, ensure that you are connected to the internet.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You will need to login to Gmail before you can use the <code>email</code> feature to send out emails to your employees (see Section 5.20 below). To login to Gmail, use the <code>login</code> command as follows:<br>
Format: <code>login</code></p>
</div>
<div class="paragraph">
<p>You will be redirected to the Gmail login page on your default internet browser, where you can then proceed to login.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When you are redirected to the Gmail login page, CarviciM may (although unlikely to happen) appear as if it is not responding. If so, don&#8217;t panic! Once you have successfully logged in to Gmail, CarviciM will be up and running again, from exactly where you left off.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>When prompted to give your permission to allow CarviciM to access your Gmail account, click on <code>ALLOW</code>.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Please do NOT click on <code>CANCEL</code>. Be assured that CarviciM will only use your account to send out emails to your employees.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For your convenience, your authorization information will be stored on your computer&#8217;s file system, even after closing and reopening CarviciM. You will, therefore, only need to <code>login</code> once.</p>
</div>
</div>
<div class="sect2">
<h3 id="email-assigned-employees-belonging-to-a-job-code-email-code"><a class="link" href="#email-assigned-employees-belonging-to-a-job-code-email-code">Email assigned employees belonging to a job : <code>email</code></a></h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>Before using this command, ensure that you are connected to the internet.</p>
</li>
<li>
<p>You will need to <code>login</code> first before you can send out emails. If you have yet to <code>login</code>, the <code>email</code> command will first redirect you to the Gmail login page on your default internet browser before sending the emails. Please see Section 5.18 above on how to <code>login</code>.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To send auto-generated emails containing the job details from your Gmail account to all assigned employees of the job, use this command as follows:<br>
Format: <code>email j/JOB_NUMBER</code></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>The <code>JOB_NUMBER</code> <strong>must be a positive integer</strong> 1, 2, 3, &#8230;&#8203;</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Take a look at the image below for a sample of the contents of the emails that will be sent when you use this command.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/Email_example.PNG" alt="Email example" width="550">
</div>
</div>
<div class="paragraph">
<p><em>Figure 5.20.1 : Sample of auto-generated email content</em></p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="paragraph">
<p><code>email j/1</code><br>
Auto-generated emails containing the job details of the job at index 1 of the job list panel will be sent from your Gmail account to all employees assigned to the job.</p>
</div>
</div>
<div class="sect2">
<h3 id="locating-employee-entries-by-tags-code-findt-code"><a class="link" href="#locating-employee-entries-by-tags-code-findt-code">Locating employee entries by tags: <code>findt</code></a></h3>
<div class="paragraph">
<p>To search for employee entries by tags, use this command as follows:<br>
Format: <code>findt KEYWORD [MORE_KEYWORDS]</code></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>The search is case insensitive. e.g <code>Technician</code> will match <code>technician</code>.</p>
</li>
<li>
<p>Only full words will be matched e.g. <code>mech</code> will not match <code>mechanic</code>.</p>
</li>
<li>
<p>Employee entries matching at least one tag will be returned (i.e. <code>OR</code> search). e.g. <code>technician mechanic</code> will provide you with a list of employees who are either technicians, mechanics or both.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Example 1:<br></p>
<div class="paragraph">
<p><code>findt technician</code><br>
You will see all employee entries with the tag <code>technican</code> (not case-sensitive), shown in the employee list panel.</p>
</div>
</li>
<li>
<p>Example 2:<br></p>
<div class="paragraph">
<p><code>findt technician mechanic</code><br>
You will see all employee entries with the tags <code>technican</code> and/or <code>mechanic</code>(not case-sensitive), shown in the employees list panel.</p>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="contributions-to-the-developer-guide"><a class="link" href="#contributions-to-the-developer-guide">Contributions to the Developer Guide</a></h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Given below are sections I contributed to the Developer Guide. They showcase my ability to write technical documentation and the technical depth of my contributions to the project.</em></p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="login-to-gmail"><a class="link" href="#login-to-gmail">Login to Gmail</a></h3>
<div class="sect3">
<h4 id="current-implementation"><a class="link" href="#current-implementation">Current Implementation</a></h4>
<div class="paragraph">
<p>This feature is implemented using <a href="https://developers.google.com/gmail/api/">Gmail API</a>.</p>
</div>
<div class="paragraph">
<p>When the user enters the <code>login</code> command, a new GmailAuthenticator object will be created which builds an authorized Gmail client service, as seen in the diagram below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/LoginCommand_SeqDiagram.PNG" alt="LoginCommand SeqDiagram" width="550">
</div>
<div class="title">Figure 1. Login sequence diagram</div>
</div>
<div class="paragraph">
<p>In the <code>authorize</code> method, a <code>GoogleAuthorizationCodeFlow</code> object is created to build the authorization code flow and trigger user authorization request. It then manages and persists user <code>Credential</code> by saving it in the file path <code>./src/main/resources/.credentials/carvicim-gmail</code>. For more details, look at the the code snippet below.</p>
</div>
<div class="paragraph">
<p>The <code>authorize</code> method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="directive">static</span> Credential authorize() <span class="directive">throws</span> <span class="exception">IOException</span> {
    <span class="predefined-type">InputStream</span> in = GmailAuthenticator.class.getResourceAsStream(<span class="string"><span class="delimiter">&quot;</span><span class="content">/client_secret.json</span><span class="delimiter">&quot;</span></span>);
    GoogleClientSecrets clientSecrets = GoogleClientSecrets.load(JSON_FACTORY, <span class="keyword">new</span> <span class="predefined-type">InputStreamReader</span>(in));

    GoogleAuthorizationCodeFlow flow =
            <span class="keyword">new</span> GoogleAuthorizationCodeFlow.Builder(
                    httpTransport, JSON_FACTORY, clientSecrets, <span class="predefined-type">Arrays</span>.asList(scope))
                    .setDataStoreFactory(dataStoreFactory)
                    .setAccessType(<span class="string"><span class="delimiter">&quot;</span><span class="content">offline</span><span class="delimiter">&quot;</span></span>)
                    .build();
    Credential credential = <span class="keyword">new</span> AuthorizationCodeInstalledApp(
            flow, <span class="keyword">new</span> LocalServerReceiver()).authorize(<span class="string"><span class="delimiter">&quot;</span><span class="content">user</span><span class="delimiter">&quot;</span></span>);
    <span class="predefined-type">System</span>.out.println(<span class="string"><span class="delimiter">&quot;</span><span class="content">Credentials saved to </span><span class="delimiter">&quot;</span></span> + DATA_STORE_DIR.getAbsolutePath());
    <span class="keyword">return</span> credential;
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="send-emails-to-employees-about-job"><a class="link" href="#send-emails-to-employees-about-job">Send Emails to Employees about Job</a></h3>
<div class="paragraph">
<p>This feature is implemented using <a href="https://developers.google.com/gmail/api/">Gmail API</a>.</p>
</div>
<div class="paragraph">
<p>A general overview of how this feature is implemented is shown in the sequence diagram below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/EmailCommand_SeqDiagram.PNG" alt="EmailCommand SeqDiagram" width="550">
</div>
<div class="title">Figure 2. Email sequence diagram</div>
</div>
<div class="paragraph">
<p>To explain the sequence of events in greater detail, when the user enters the <code>email j/JOB_NUMBER</code> command, a <code>UniqueEmployeeList</code> of <code>JOB_NUMBER</code> job is obtained from the <code>Job</code> object. Using a <code>for</code> loop, an email is sent to each employee in the <code>UniqueEmployeeList</code>.</p>
</div>
<div class="paragraph">
<p>To craft an email, an empty <code>Properties</code> list is created, which is used to create an email <code>Session</code>. A <code>MimeMessage</code>, a class in the <code>javax.mail.internet</code> package is created using that <code>Session</code>. The body of the <code>MimeMessage</code> contains details extracted from the particular <code>Job</code>, and is then encoded using <a href="https://en.wikipedia.org/wiki/Base64">base64url</a> and repackaged into a <code>Message</code> by setting the value of the <code>raw</code> property of the <code>Message</code> to the encoded <code>MimeMessage</code>. How the repacking is done is shown in the code snippet below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="directive">static</span> Message createMessageWithEmail(MimeMessage emailContent) <span class="directive">throws</span> MessagingException, <span class="exception">IOException</span> {
    <span class="predefined-type">ByteArrayOutputStream</span> buffer = <span class="keyword">new</span> <span class="predefined-type">ByteArrayOutputStream</span>();
    emailContent.writeTo(buffer);
    <span class="type">byte</span><span class="type">[]</span> bytes = buffer.toByteArray();
    <span class="predefined-type">String</span> encodedEmail = Base64.encodeBase64URLSafeString(bytes);
    Message message = <span class="keyword">new</span> Message();
    message.setRaw(encodedEmail);
    <span class="keyword">return</span> message;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally, this <code>Message</code> is sent by making a call to <code>messages.send</code>.</p>
</div>
<div class="sect3">
<h4 id="design-considerations"><a class="link" href="#design-considerations">Design Considerations</a></h4>
<div class="sect4">
<h5 id="aspect-email-content"><a class="link" href="#aspect-email-content">Aspect: Email content</a></h5>
<div class="ulist">
<ul>
<li>
<p><strong>Current choice:</strong> Email content contains job information extracted from the particular Job object only</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Easier to implement, and the email will be sent out very quickly, immediately after typing one line of command, making it more convenient for the user</p>
</li>
<li>
<p>Cons: User has no ability to change or add to the contents of the email if the user wishes to.</p>
</li>
</ul>
</div>
</li>
<li>
<p><em>Alternative:</em> User gets to edit or add to the email content</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Provides flexibility as the user is allowed to change and add details to the email content.</p>
</li>
<li>
<p>Cons: Need to direct user to an editor, thus more difficult to implement. User would also have to go through more steps than necessary if the user does not wish to change or add details to the email content</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="aspect-authorization-information"><a class="link" href="#aspect-authorization-information">Aspect: Authorization information</a></h5>
<div class="ulist">
<ul>
<li>
<p><strong>Current choice:</strong> Stored in file system so subsequent executions will not prompt for authorization</p>
<div class="ulist">
<ul>
<li>
<p>Pros: More convenient for the user as the user only needs to key in his or her authorization information once</p>
</li>
<li>
<p>Cons: Unsafe if the computer used is a shared one as another person can send out emails from the logged in user&#8217;s account.</p>
</li>
</ul>
</div>
</li>
<li>
<p><em>Alternative:</em> Prompt for authorization for every subsequent executions</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Safer as another person cannot simply send out emails from the logged in user&#8217;s account, even on a shared computer.</p>
</li>
<li>
<p>Cons: Inconvenient for user as user needs to always key in authorization information before sending emails for each job.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="find-by-tag-feature"><a class="link" href="#find-by-tag-feature">Find by tag feature</a></h3>
<div class="sect3">
<h4 id="current-implementation-2"><a class="link" href="#current-implementation-2">Current Implementation</a></h4>
<div class="paragraph">
<p>When the user enters <code>findt</code> followed by some keywords, for each existing employee, the employee&#8217;s tags will be concatenated to form a String, with a space in between each tag. The <code>stream</code> method of <code>List</code> class will then be used to check if any of the keywords entered by the user matches any word in the concatenated string. The code for this algorithm is shown below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">boolean</span> test(Employee employee) {
    <span class="predefined-type">Set</span>&lt;Tag&gt; employeeTags = employee.getTags();
    <span class="predefined-type">String</span> tagsConcatenated = <span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>;
    <span class="keyword">for</span> (Tag tag: employeeTags) {
        tagsConcatenated = tagsConcatenated + tag.getTagName() + <span class="string"><span class="delimiter">&quot;</span><span class="content"> </span><span class="delimiter">&quot;</span></span>;
    }
    <span class="directive">final</span> <span class="predefined-type">String</span> allTagNames = tagsConcatenated;

    <span class="keyword">return</span> keywords.stream()
            .anyMatch(keyword -&gt; StringUtil.containsWordIgnoreCase(allTagNames, keyword));
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This algorithm is then repeated for all existing employees to get the filtered list.</p>
</div>
</div>
<div class="sect3">
<h4 id="design-considerations-2"><a class="link" href="#design-considerations-2">Design Considerations</a></h4>
<div class="sect4">
<h5 id="aspect-number-of-keyword-matches"><a class="link" href="#aspect-number-of-keyword-matches">Aspect: Number of keyword matches</a></h5>
<div class="ulist">
<ul>
<li>
<p><strong>Current choice:</strong> Only at least 1 keyword match is needed for the employee to appear on the filtered list.</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Useful for users who wish to see employees who only have at least 1 keyword as their tag in the filtered list.</p>
</li>
<li>
<p>Cons: May not be useful for users who wish to search for employees that have all the keywords as their tags.</p>
</li>
</ul>
</div>
</li>
<li>
<p><em>Alternative:</em> All keywords have to match for the employee to appear on the filtered list.</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Useful for users who wish to search for employees that have all the keywords as their tags.</p>
</li>
<li>
<p>Cons: May not be useful for users who wish to see employees who only have at least 1 keyword as their tag in the filtered list.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2018-04-15 16:05:36 UTC
</div>
</div>
</body>
</html>